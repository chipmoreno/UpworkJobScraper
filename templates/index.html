<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings</title>
    <style>
        /* Your existing CSS */
    </style>
    <script>
        function toggleDescription(jobId) {
            var desc = document.getElementById('desc-' + jobId);
            var shortDesc = document.getElementById('short-desc-' + jobId);
            var btn = document.getElementById('btn-' + jobId);

            if (desc.style.display === "none") {
                desc.style.display = "block";
                shortDesc.style.display = "none";
                btn.textContent = "↑ Collapse Description";
            } else {
                desc.style.display = "none";
                shortDesc.style.display = "block";
                btn.textContent = "↓ Expand Description";
            }
        }
    </script>
</head>
<body>

<div class="container">
    <h1>Job Listings</h1>
    
    <!-- Descriptive Summary Section -->
    <h2>Job Category Distribution</h2>
    <ul>
        {% for category, count in category_counts.items() %}
            <li>{{ category }}: {{ count }} jobs</li>
        {% endfor %}
    </ul>

    <h2>Experience Level Distribution</h2>
    <ul>
        {% for level, count in experience_level_counts.items() %}
            <li>{{ level }}: {{ count }} jobs</li>
        {% endfor %}
    </ul>

    <h2>Average Budget per Category</h2>
    <ul>
        {% for category, avg_budget in avg_budget_by_category.items() %}
            <li>{{ category }}: ${{ avg_budget|round(2) }} (avg budget)</li>
        {% endfor %}
    </ul>

    <!-- Job Listings Section -->
    <h2>Job Listings</h2>
    {% if jobs %}
        {% for job in jobs %}
            <div class="job-card">
                <p class="time">Posted: {{ job.time_posted }}</p>
                <h2><a href="{{ job.link }}" target="_blank">{{ job.title }}</a></h2>
                <p id="short-desc-{{ loop.index }}" class="short-description">{{ job.description[:100] }}...</p> <!-- Truncated version -->
                <div id="desc-{{ loop.index }}" class="full-description">
                    <p>{{ job.description }}</p> <!-- Full version -->
                </div>
                <button class="expand-btn" id="btn-{{ loop.index }}" onclick="toggleDescription({{ loop.index }})">↓ Expand Description</button>
            </div>
        {% endfor %}
    {% else %}
        <p>No jobs available right now. Please check back later!</p>
    {% endif %}
</div>

</body>
</html>
