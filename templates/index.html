<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings</title>
</head>
<body>
    <h1>Job Listings</h1>

    <!-- Form to define user filtering criteria -->
    <form method="POST" action="/">
        <label for="keywords">Keywords (comma-separated):</label>
        <input type="text" id="keywords" name="keywords" placeholder="e.g., Python, Data Science" />

        <br />

        <label for="min_budget">Min Budget:</label>
        <input type="number" id="min_budget" name="min_budget" placeholder="e.g., 1000" />

        <br />

        <label for="max_budget">Max Budget:</label>
        <input type="number" id="max_budget" name="max_budget" placeholder="e.g., 5000" />

        <br />

        <label for="experience_levels">Experience Level:</label>
        <select id="experience_levels" name="experience_levels" multiple>
            <option value="Junior">Junior</option>
            <option value="Mid">Mid</option>
            <option value="Senior">Senior</option>
        </select>

        <br />

        <button type="submit">Filter Jobs</button>
    </form>

    <h2>Filtered Job Listings</h2>
    <ul>
        {% for job in jobs %}
            <li>
                <a href="{{ job['link'] }}" target="_blank">{{ job['title'] }}</a><br />
                <strong>Posted:</strong> {{ job['time_posted'] }}<br />
                <strong>Description:</strong> {{ job['description'] }}<br />
                <strong>Budget:</strong> {{ job.get('budget', 'N/A') }}<br />
            </li>
        {% endfor %}
    </ul>

    <h3>Category Counts</h3>
    <ul>
        {% for category, count in category_counts.items() %}
            <li>{{ category }}: {{ count }}</li>
        {% endfor %}
    </ul>

    <h3>Experience Level Counts</h3>
    <ul>
        {% for level, count in experience_level_counts.items() %}
            <li>{{ level }}: {{ count }}</li>
        {% endfor %}
    </ul>

    <h3>Average Budget by Category</h3>
    <ul>
        {% for category, avg_budget in avg_budget_by_category.items() %}
            <li>{{ category }}: ${{ avg_budget }}</li>
        {% endfor %}
    </ul>
</body>
</html>
